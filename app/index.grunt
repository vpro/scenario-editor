<!doctype html>
<html ng-app="SE" ng-controller="MainController as mainCtrl" ng-init="mainCtrl.init()">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Scenario Editor</title>

	<!-- build:css styles/app.css -->
	<!--<link rel="stylesheet" href="styles/normalize.css" type="text/css" media="all" />-->
	<link rel="stylesheet" href="styles/main.css" type="text/css" media="all" />
    <link rel="stylesheet" href="styles/twitter-bootstrap/bootstrap.min.css" type="text/css" media="all" />
    <link rel="stylesheet" href="http://www.vpro.nl/resources/vpro/themes/vpronl/css/style.css" />
	<!-- endbuild -->

</head>

<body>

	<div class="container-fluid">

        <div class="row" ng-show="playerVisible">

            <div class="col-md-2"></div>

            <div class="col-md-10" id="player">

                <div id="scenario-player-container">
                    <se-player id="scenario-player"></se-player>
                </div>

            </div>

        </div>

        <div class="row">
            <div class="col-md-2"></div>
            <div class="col-md-10">
                <button ng-show="!playerVisible" class="btn btn-info" ng-click="mainCtrl.togglePlayerVisible()">show player</button>
                <button ng-show="playerVisible" class="btn btn-info" ng-click="mainCtrl.togglePlayerVisible()">hide player</button>

                <select ng-model="selectedActor" ng-options="actor as actor.name for actor in actorTypes"></select>

                <button class="btn-primary btn" ng-if="selectedActor" ng-click="mainCtrl.addActor( selectedActor )">Add {{selectedActor.name}}</button>

            </div>
        </div>

        <div class="row">

            <div class="col-md-2">

                <div class="meta">
                    <span class="label label-info">Naam</span>
                    <input ng-model="timeline.name" type="text" />
                </div>

                <div class="meta">
                    <span class="label label-info">Duur</span>
                    <input ng-model="timeline.duration" type="number" />
                </div>

            </div>

            <div class="col-md-10">
                <textarea class="form-control" rows="6">
                    {{script | json}}
                </textarea>
            </div>

        </div>

        <div class="row">
            <div class="col-md-2"></div>
            <div class="col-md-10">
                <button ng-click="mainCtrl.sortActors()">Sorteer op tijd</button>
            </div>
        </div>

		<div class="timeline">

			<div class="row se-actor" ng-repeat="actor in actors track by $index">

                <div class="col-md-2">

                    <div ng-click="actorDetailsOpen = !actorDetailsOpen" class="actor-name">
                        {{actor.name}} {{$index}}
                    </div>

                    <div>
                        <span class="label label-info">start </span>
                        <input ng-model="actor.start" type="number" step="1000" />
                    </div>

                    <div>
                        <span class="label label-info">duur </span>
                        <input ng-model="actor.duration" type="number" step="1000"/>
                    </div>

                    <div ng-init="actorDetailsOpen = false"  ng-show="actorDetailsOpen" class="actormetadetails">

                        <div ng-if="actor.type.length > 0">
                            <span class="label label-info">type</span>
                            <span class="value">{{actor.type}}</span>
                        </div>

                        <div ng-if="actor.animationName.length > 0">
                            <span class="label label-info">animationName</span>
                            <span class="value">{{actor.animationName}}</span>
                        </div>

                    </div>

                </div>

                <div class="col-md-10">

                    <div class="src">
                        <div class="value" ng-if="actor.preload.url.length > 0">
                            {{actor.preload.url}}
                            <div class="actor-image" style="background-image: url('{{assetRoot}}{{actor.preload.url}}')"></div>
                        </div>
                        <div class="value" ng-if="!actor.preload.url.length && actor.preload.url.length === undefined">
                            {{actor.src}}
                        </div>
                    </div>

                    <div se-draggable-container class="actorline">
                        <div class="actorname">{{actor.name}}</div>
                        <span se-draggable ondrag="mainCtrl.onDrag(actor, x, y)" ondrop="mainCtrl.onDrop()" class="indicator" ng-style="{
                            left:(actor.start/timeline.duration)*100+'%',
                            width:(actor.duration/timeline.duration)*100+'%'
                        }"></span>
                    </div>

                </div>

			</div>

		</div>

	</div>


    <script src="http://localhost:8081/embed/configuration.js?var=vpro"></script>
    <script src="http://localhost:8081/ext/require/2.1.17/require.min.js"></script>

	<!-- build:js js/vendor.js -->

	<script src="scripts/vendor/angularjs/angular.min.js"></script>
	<!-- endbuild -->

	<!-- build:js js/editor.js -->
	<script src="scripts/editor/app.js"></script>
	<script src="scripts/editor/controllers/MainController.js"></script>

	<script src="scripts/editor/services/SessionService.js"></script>
	<script src="scripts/editor/services/ActorService.js"></script>

	<script src="scripts/editor/directives/Draggable.js"></script>
	<script src="scripts/editor/directives/ScenarioPlayer.js"></script>

	<!-- endbuild -->

</body>
</html>